# ========================================
# Production Environment Configuration
# Birthday Message Scheduler
# ========================================

# ----------------------------------------
# Application
# ----------------------------------------
NODE_ENV=production
PORT=3000
HOST=0.0.0.0
LOG_LEVEL=info

# ----------------------------------------
# Database (PostgreSQL)
# ----------------------------------------
DATABASE_URL=postgres://postgres:CHANGE_ME_STRONG_PASSWORD@postgres-primary:5432/birthday_app
DATABASE_HOST=postgres-primary
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=CHANGE_ME_STRONG_PASSWORD
DATABASE_NAME=birthday_app
DATABASE_POOL_MIN=10
DATABASE_POOL_MAX=50
DATABASE_SSL=true
DATABASE_SSL_REJECT_UNAUTHORIZED=false

# Read Replica (optional)
DATABASE_REPLICA_URL=postgres://postgres:CHANGE_ME_STRONG_PASSWORD@postgres-replica:5432/birthday_app

# ----------------------------------------
# RabbitMQ
# ----------------------------------------
RABBITMQ_URL=amqp://rabbitmq:CHANGE_ME_RABBITMQ_PASSWORD@rabbitmq-1:5672
RABBITMQ_HOST=rabbitmq-1
RABBITMQ_PORT=5672
RABBITMQ_USER=rabbitmq
RABBITMQ_PASSWORD=CHANGE_ME_RABBITMQ_PASSWORD
RABBITMQ_VHOST=/
RABBITMQ_QUEUE_NAME=birthday-messages
RABBITMQ_EXCHANGE_NAME=birthday-exchange
RABBITMQ_DLX_NAME=birthday-dlx
RABBITMQ_DLQ_NAME=birthday-dlq
RABBITMQ_ERLANG_COOKIE=CHANGE_ME_ERLANG_COOKIE_SECRET

# ----------------------------------------
# Redis (Caching)
# ----------------------------------------
REDIS_URL=redis://:CHANGE_ME_REDIS_PASSWORD@redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
REDIS_DB=0
REDIS_TTL=3600

# ----------------------------------------
# Email Service
# ----------------------------------------
EMAIL_SERVICE_URL=https://email-service.digitalenvision.com.au/send-email
EMAIL_SERVICE_TIMEOUT=15000
EMAIL_SERVICE_RETRY_ATTEMPTS=3

# ----------------------------------------
# Queue Configuration
# ----------------------------------------
QUEUE_CONCURRENCY=10
QUEUE_MAX_RETRIES=5
QUEUE_RETRY_DELAY=3000
QUEUE_RETRY_BACKOFF=exponential
QUEUE_PREFETCH_COUNT=10

# ----------------------------------------
# CRON Schedules
# ----------------------------------------
CRON_DAILY_SCHEDULE=0 0 * * *          # Daily at midnight UTC
CRON_MINUTE_SCHEDULE=* * * * *         # Every minute
CRON_RECOVERY_SCHEDULE=*/10 * * * *    # Every 10 minutes

# ----------------------------------------
# Circuit Breaker
# ----------------------------------------
CIRCUIT_BREAKER_TIMEOUT=15000
CIRCUIT_BREAKER_ERROR_THRESHOLD=50
CIRCUIT_BREAKER_RESET_TIMEOUT=60000
CIRCUIT_BREAKER_VOLUME_THRESHOLD=10

# ----------------------------------------
# Rate Limiting
# ----------------------------------------
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=1000

# ----------------------------------------
# Monitoring & Metrics
# ----------------------------------------
ENABLE_METRICS=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# ----------------------------------------
# Grafana
# ----------------------------------------
GRAFANA_USER=admin
GRAFANA_PASSWORD=CHANGE_ME_GRAFANA_PASSWORD

# ----------------------------------------
# Security
# ----------------------------------------
API_SECRET_KEY=CHANGE_ME_API_SECRET_KEY
JWT_SECRET=CHANGE_ME_JWT_SECRET
ENCRYPTION_KEY=CHANGE_ME_32_CHAR_ENCRYPTION_KEY

# ----------------------------------------
# Feature Flags
# ----------------------------------------
ENABLE_SWAGGER=false
ENABLE_SWAGGER_UI=false
ENABLE_CORS=false
ENABLE_RATE_LIMITING=true

# ----------------------------------------
# Performance Tuning
# ----------------------------------------
NODE_OPTIONS=--max-old-space-size=512
UV_THREADPOOL_SIZE=16

# ----------------------------------------
# Logging
# ----------------------------------------
LOG_FORMAT=json
LOG_PRETTY=false
LOG_DESTINATION=stdout
LOG_FILE_PATH=/app/logs/app.log

# ----------------------------------------
# Health Checks
# ----------------------------------------
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000

# ----------------------------------------
# Backup & Recovery
# ----------------------------------------
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # 2 AM daily
BACKUP_RETENTION_DAYS=30
BACKUP_DESTINATION=s3://birthday-app-backups

# ----------------------------------------
# Alerting
# ----------------------------------------
ALERT_EMAIL=ops@example.com
ALERT_SLACK_WEBHOOK=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
ALERT_PAGERDUTY_KEY=YOUR_PAGERDUTY_KEY
